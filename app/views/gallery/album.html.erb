<% content_for :header do %>
<% end %>

<% content_for :footer do %>
    <%= javascript_include_tag "masonry.pkgd.min.js" %>
    <%= javascript_include_tag "imagesloaded.pkgd.min.js" %>

    <script>
        $(function() 
        {
            var $grid = $('.grid').imagesLoaded( function()
            {
                $grid.masonry({
                    percentPosition: true
                });
            });

            $('#previewViewer').on('show.bs.modal', function (event) 
            {
                var button = $(event.relatedTarget),
                    img_url = $('img', button).prop('src'),
                    modal_body = $('.modal-body', this);
                
                modal_body.empty();
                
                $('<img />',
                { 
                    src: img_url,
                }).appendTo(modal_body);
            });
        });
    </script>
<% end %>

<div class="album-container container-fluid">
    <section class="py-5 text-center container">
        <div class="row">
            <div class="col">
                <h1 class="fw-light"><%= @album.name %></h1>
                <p class="lead text-muted"><%= @album.description %></p>
            </div>
        </div>
    </section>
    <div class="row grid">
        <% @album.images.each do |image| %>
            <div class="col col-sm-6 col-md-4 col-lg-3 mb-4">
                <a href="#previewViewer" data-bs-toggle="modal">
                    <%= image_tag image, loading: 'lazy', class: 'img-thumbnail w-100' %>
                </a>
            </div>
        <% end %>
    </div>

    <section class="modal fade" id="previewViewer" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="modalTitle">Preview</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex justify-content-center align-items-center"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </section>
</div>